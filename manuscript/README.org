#+TITLE: Analysis from manuscript "Interpretable modeling of genotype-phenotype landscapes with state-of-the-art predictive power"
#+AUTHOR: Peter D. Tonner (NIST)

* Setup
  
  To easily manage the dependencies to run this code, it is
  recommended to use [[https://docs.conda.io/en/latest/][conda]] with the provided ~environment.yml~ file:

  #+begin_src bash
    conda env create -f environment.yml
  #+end_src
  
* Pipeline
  Everything in the analysis is managed with [[https://snakemake.readthedocs.io/en/stable/index.html][snakemake]], which greatly
  simplifies re-creating the workflow. Below outlines the steps
  required to reproduce the full analysis. 

  The outputs of this pipeline is largely divided into these categories:
  1. Data setup
  2. Prediction output: CV training of models across each
  3. Analysis output (e.g. downstream analysis of LANTERN models)

** Data preparation
   To download and prepare all datasets run
   #+begin_src bash
     snakemake -j1 data
   #+end_src

** Prediction
   Generate the output figures from prediction, and by necessity the
   precursor training of different models on cross-validation folds,
   with:
   #+begin_src bash
     snakemake -j1 pred_figures
   #+end_src
   
** Model figures
   The pre-trained LANTERN models for LacI, avGFP, and SARS-CoV-2 that
   were used for main text figures are included as part of this
   repository. Figures for those models can be re-created with:
   #+begin_src bash
     snakemake -j1 exp_figures
   #+end_src
