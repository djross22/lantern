configfile: "config.yaml"

include: "data.smk"
include: "lantern.smk"
include: "feedforward.smk"
include: "globalep.smk"
include: "figures.smk"

rule models:
    """
    Generate models (warning: computation intensive!)
    """
    input:
        expand("experiments/gfp/lantern/cv{cv}/model.pt", cv=range(10)),
        expand("experiments/gfp/lantern/cv{cv}/pred-val.csv", cv=range(10)),
        expand("experiments/gfp/feedforward-K8/cv{cv}/model.pt", cv=range(10)),
        expand("experiments/gfp/feedforward-K1/cv{cv}/model.pt", cv=range(10)),
        expand("experiments/gfp/feedforward-K8/cv{cv}/pred-val.csv", cv=range(10)),
        expand("experiments/gfp/feedforward-K1/cv{cv}/pred-val.csv", cv=range(10)),
        expand("experiments/gfp-brightness/globalep/cv{cv}/pred-val.csv", cv=range(10)),


rule figures:
    """
    Generate figures for the manuscript.
    """
    input:
        "figures/cvr2.png",
        "figures/gfp/surface.png",

    shell:
        "tar -czf figures.tar.gz figures/*"

rule help:
    """
    Print list of all targets with help.
    """
    run:
        for rule in workflow.rules:
            print(rule.name)
            print(rule.docstring)
